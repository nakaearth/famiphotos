class Album < FamiphotoBase
  include Searchable

  use_switch_point :famiphoto

  ####################################################################
  ################# Association ######################################
  ####################################################################
  has_many :photos
  belongs_to :group

  ####################################################################
  ####################### Validation #################################
  ####################################################################
  validates :title, presence: true, length: { maximum: 80 }

  ####################################################################
  ##################### コールバック群 ###############################
  ####################################################################

  ####################################################################
  ##################### クラスメソッド ###############################
  ####################################################################
  class << self
  end

  ####################################################################
  ##################### インスタンスメソッド #########################
  ####################################################################
  # [memo] もしかしたら、これはdecoratorにおくべきかな？
  def top_image_url
    return 'img/np_photo.jpg' if phtos.blank?

    photos.order(:id).first.image.thumb.url
  end
end
